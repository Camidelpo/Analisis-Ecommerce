ðŸ§  DAX â€“ razon_fallo.dax
Razon_Fallo =
VAR Estado =
    UPPER( TRIM( T_PAGOS[EstadoPago] ) )
RETURN
SWITCH(
    TRUE(),
    Estado <> "FALLIDO", BLANK(),
    T_PAGOS[MetodoPago] = "Tarjeta", "Rechazo bancario",
    T_PAGOS[MetodoPago] = "MercadoPago", "Error de gateway",
    T_PAGOS[MetodoPago] = "Transferencia", "Proceso no completado",
    T_PAGOS[MetodoPago] = "Efectivo", "Usuario abandonÃ³",
    "Otra causa"
)

ðŸ§ Pagos Exitosos = 
CALCULATE(
    COUNTROWS(tabla_hechos),
    tabla_hechos[EstadoPago] = "Exitoso"
)


ðŸ§ Pagos Fallidos = 
CALCULATE(
    COUNTROWS(tabla_hechos),
    tabla_hechos[EstadoPago] = "Fallido"
)

ðŸ§ Pagos Totales = COUNTROWS(tabla_hechos)

ðŸ§ Monto Perdido = 
CALCULATE(
    SUM(tabla_hechos[MontoLinea]),
    tabla_hechos[EstadoPago] = "Fallido"
)


ðŸ§ Recuperacion_10 = 
[Monto Perdido] * 0.10

ðŸ§ Tasa Exito = 
DIVIDE([Pagos Exitosos], [Pagos Totales])

ðŸ§ Tasa Fallas = 
DIVIDE([Pagos Fallidos], [Pagos Totales])